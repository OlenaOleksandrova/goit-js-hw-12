{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport const BASE_URL = 'https://pixabay.com/api/';\nexport const API_KEY = '46110623-cffeede45492ee1adb33fe3c4';\nexport const PER_PAGE = 6;\n\nexport async function fetchImages(query, currentPage = 1) {\n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        page: currentPage,\n        per_page: PER_PAGE,\n\n    });\n\n    const url = `${BASE_URL}?${params}`;\n\n    try {\n        const data = await axios.get(url);\n        console.log('fetchImages data:', data.data);\n        return data.data;\n    } catch (error) {\n        console.error('Error fetching images:', error);\n    }\n\n}\n    \n\n","export function renderImages(images) {\n    return images.reduce((acc, item) => {\n        return (\n            acc +\n            `<article class=\"gallery-item\">\n                <a href=\"${item.largeImageURL}\" class=\"gallery-link\">\n                    <img src=\"${item.webformatURL}\" alt=\"${item.tags}\" class=\"gallery-image\" />\n                </a>\n                <ul class=\"info\">\n                    <li class=\"info-item\"><strong>Likes:</strong> ${item.likes}</li>\n                    <li class=\"info-item\"><strong>Views:</strong> ${item.views}</li>\n                    <li class=\"info-item\"><strong>Comments:</strong> ${item.comments}</li>\n                    <li class=\"info-item\"><strong>Downloads:</strong> ${item.downloads}</li>\n                </ul>\n            </article>`\n        );\n    }, '');\n}","import { fetchImages, PER_PAGE } from './js/pixabay-api.js';\nimport { renderImages } from './js/render-functions.js';\nimport axios from 'axios';\n\nconst searchForm = document.querySelector('.search-form');\n// const loaderEl = document.querySelector('.loader'); \nconst imagesBoxEl = document.querySelector('.gallery');\nconst loadMore = document.querySelector('.js-load-more')\nlet currentPage = 1;\nlet query = null;\nlet pages = 0;\n\n\n// подія форми\n\nsearchForm.addEventListener('submit', handleSubmit);\nloadMore.addEventListener('click', handleLoadMore);\n   \n\nasync function handleSubmit(event) {\n    event.preventDefault();\n\n     const form = event.currentTarget;\n    query = form.elements.query.value.trim(); \n \n    if (!query) {\n        return;\n    }\n\n    try {\n       \n        const response = await fetchImages(query, currentPage);\n        pages = Math.ceil(response.totalHits / PER_PAGE);\n        console.log('handleSubmit:', response);\n\n    \n        const imagesMarkup = renderImages(response.hits);\n        imagesBoxEl.innerHTML = imagesMarkup;\n\n          if (response.totalHits > currentPage * PER_PAGE) {\n            loadMore.classList.remove('is-hidden'); // Показуємо кнопку\n        } else {\n            loadMore.classList.add('is-hidden'); // Ховаємо кнопку\n        }\n\n        // LoadMore.classList.remove('is-hidden'); \n        \n    } catch (error) {\n        console.error('Error:', error);\n\n    } finally {\n        form.reset();\n    }\n}\n\nasync function handleLoadMore() {\n    currentPage += 1;\n    console.log(pages);\n    try {\n        handleScrollView();\n         const response = await fetchImages(query, currentPage);\n        console.log('handleLoadMore:', response);\n\n        const imagesMarkup = renderImages(response.hits);\n        imagesBoxEl.insertAdjacentHTML('beforeend', imagesMarkup);\n\n        if (currentPage >= pages) {\n            loadMore.classList.add('is-hidden');\n            return \"We're sorry, but you've reached the end of search results.\";\n        }\n    } catch (error) {\n         console.error('Error:', error);\n     }\n}\n \nfunction handleScrollView() {\n    const lastArticle = imagesBoxEl.lastElementChild;\n    const articleHeight = lastArticle.getBoundingClientRect().height;\n    console.log('handleScrollView', articleHeight)\n}"],"names":["BASE_URL","API_KEY","PER_PAGE","fetchImages","query","currentPage","params","url","data","axios","error","renderImages","images","acc","item","searchForm","imagesBoxEl","loadMore","pages","handleSubmit","handleLoadMore","event","form","response","imagesMarkup","handleScrollView","articleHeight"],"mappings":"svBAEO,MAAMA,EAAW,2BACXC,EAAU,qCACVC,EAAW,EAEjB,eAAeC,EAAYC,EAAOC,EAAc,EAAG,CACtD,MAAMC,EAAS,IAAI,gBAAgB,CAC/B,IAAKL,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAMC,EACN,SAAUH,CAElB,CAAK,EAEKK,EAAM,GAAGP,CAAQ,IAAIM,CAAM,GAEjC,GAAI,CACA,MAAME,EAAO,MAAMC,EAAM,IAAIF,CAAG,EAChC,eAAQ,IAAI,oBAAqBC,EAAK,IAAI,EACnCA,EAAK,IACf,OAAQE,EAAO,CACZ,QAAQ,MAAM,yBAA0BA,CAAK,CAChD,CAEL,CC5BO,SAASC,EAAaC,EAAQ,CACjC,OAAOA,EAAO,OAAO,CAACC,EAAKC,IAEnBD,EACA;AAAA,2BACeC,EAAK,aAAa;AAAA,gCACbA,EAAK,YAAY,UAAUA,EAAK,IAAI;AAAA;AAAA;AAAA,oEAGAA,EAAK,KAAK;AAAA,oEACVA,EAAK,KAAK;AAAA,uEACPA,EAAK,QAAQ;AAAA,wEACZA,EAAK,SAAS;AAAA;AAAA,wBAI/E,EAAE,CACT,CCbA,MAAMC,EAAa,SAAS,cAAc,cAAc,EAElDC,EAAc,SAAS,cAAc,UAAU,EAC/CC,EAAW,SAAS,cAAc,eAAe,EACvD,IAAIZ,EAAc,EACdD,EAAQ,KACRc,EAAQ,EAKZH,EAAW,iBAAiB,SAAUI,CAAY,EAClDF,EAAS,iBAAiB,QAASG,CAAc,EAGjD,eAAeD,EAAaE,EAAO,CAC/BA,EAAM,eAAc,EAEnB,MAAMC,EAAOD,EAAM,cAGpB,GAFAjB,EAAQkB,EAAK,SAAS,MAAM,MAAM,KAAI,EAElC,EAAClB,EAIL,GAAI,CAEA,MAAMmB,EAAW,MAAMpB,EAAYC,EAAOC,CAAW,EACrDa,EAAQ,KAAK,KAAKK,EAAS,UAAYrB,CAAQ,EAC/C,QAAQ,IAAI,gBAAiBqB,CAAQ,EAGrC,MAAMC,EAAeb,EAAaY,EAAS,IAAI,EAC/CP,EAAY,UAAYQ,EAElBD,EAAS,UAAYlB,EAAcH,EACrCe,EAAS,UAAU,OAAO,WAAW,EAErCA,EAAS,UAAU,IAAI,WAAW,CAKzC,OAAQP,EAAO,CACZ,QAAQ,MAAM,SAAUA,CAAK,CAErC,QAAc,CACNY,EAAK,MAAK,CACb,CACL,CAEA,eAAeF,GAAiB,CAC5Bf,GAAe,EACf,QAAQ,IAAIa,CAAK,EACjB,GAAI,CACAO,IACC,MAAMF,EAAW,MAAMpB,EAAYC,EAAOC,CAAW,EACtD,QAAQ,IAAI,kBAAmBkB,CAAQ,EAEvC,MAAMC,EAAeb,EAAaY,EAAS,IAAI,EAG/C,GAFAP,EAAY,mBAAmB,YAAaQ,CAAY,EAEpDnB,GAAea,EACf,OAAAD,EAAS,UAAU,IAAI,WAAW,EAC3B,4DAEd,OAAQP,EAAO,CACX,QAAQ,MAAM,SAAUA,CAAK,CAChC,CACN,CAEA,SAASe,GAAmB,CAExB,MAAMC,EADcV,EAAY,iBACE,sBAAqB,EAAG,OAC1D,QAAQ,IAAI,mBAAoBU,CAAa,CACjD"}